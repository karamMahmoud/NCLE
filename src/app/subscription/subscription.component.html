<ion-content [fullscreen]="true">
  <div class="subscription-container">
    <div class="subscription-form">
      <div class="form-header">
        <h1>Subscribe</h1>
        <p>to our Monthly Surprise Box</p>
        
        <div class="steps">
          <span class="step active">Information</span>
          <span class="step">Shopping</span>
          <span class="step">Payment</span>
        </div>
      </div>

      <div class="form-section">
        <h2>Contact Information</h2>
        <div class="form-group">
          <label>Your Name</label>
          <input type="text" [(ngModel)]="formData.name" placeholder="e.g Osama Alshahmi">
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="formData.email" placeholder="Osama@gmail.com">
        </div>
      </div>

      <div class="form-section">
        <h2>Child's Information</h2>
        <div class="form-group">
          <label>Child's Full Name</label>
          <input type="text" [(ngModel)]="formData.childName" placeholder="e.g Sarah Mohammad">
        </div>

        <div class="form-group">
          <label>Child's Date of Birth</label>
          <div class="date-inputs">
            <select [(ngModel)]="formData.dateOfBirth.date">
              <option value="" disabled selected>Date</option>
              <option *ngFor="let i of [].constructor(31); let day = index" [value]="day + 1">{{day + 1}}</option>
            </select>
            <select [(ngModel)]="formData.dateOfBirth.month">
              <option value="" disabled selected>Month</option>
              <option *ngFor="let month of months" [value]="month.value">{{month.name}}</option>
            </select>
            <select [(ngModel)]="formData.dateOfBirth.year">
              <option value="" disabled selected>Year</option>
              <option *ngFor="let year of [].constructor(20); let i = index" [value]="2024 - i">{{2024 - i}}</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Grade</label>
          <select [(ngModel)]="formData.grade">
            <option value="" disabled selected>e.g Grade 2</option>
            <option *ngFor="let grade of [].constructor(12); let i = index" [value]="'Grade ' + (i + 1)">Grade {{i + 1}}</option>
          </select>
        </div>

        <div class="form-group">
          <label>Gender</label>
          <div class="gender-buttons">
            <button [class.selected]="formData.gender === 'Boy'" (click)="formData.gender = 'Boy'">
              Boy
              <div class="check-circle">
                <ion-icon name="checkmark-outline"></ion-icon>
              </div>
            </button>
            <button [class.selected]="formData.gender === 'Girl'" (click)="formData.gender = 'Girl'">
              Girl
              <div class="check-circle">
                <ion-icon name="checkmark-outline"></ion-icon>
              </div>
            </button>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h2>As a parent select any 3 topics</h2>
        <div class="topics">
          <button *ngFor="let topic of availableTopics" 
                  [class.selected]="isTopicSelected(topic)"
                  (click)="selectTopic(topic)"
                  [disabled]="!isTopicSelected(topic) && selectedTopics.length >= 3">
            {{topic}}
          </button>
        </div>
      </div>
    </div>

    <div class="summary-section">
      <h2>Summary</h2>
      <p>of your Monthly Surprise Box</p>

      <div class="summary-item">
        <div class="item-details">
          <div class="item-name">
            <span>Mystery Box</span>
            <span class="quantity">X 1</span>
          </div>
          <div class="price-info">
            <div class="price">
              <span class="currency">SAR</span>
              <span class="amount">456</span>
            </div>
            <span class="period">Monthly</span>
          </div>
        </div>
      </div>

      <div class="summary-totals">
        <div class="total-row">
          <span>Subtotal</span>
          <span>SAR {{summary.boxPrice}}</span>
        </div>
        <div class="total-row">
          <span>Shipping</span>
          <span>{{summary.shipping}}</span>
        </div>
        <div class="total-row">
          <span>Taxes</span>
          <span>SAR {{summary.tax}}</span>
        </div>
        <div class="total-row final">
          <span>Total</span>
          <span>SAR {{summary.total}}</span>
        </div>
      </div>

      <div class="button-container">
        <button class="continue-btn">Continue to Payment</button>
      </div>
    </div>
  </div>
</ion-content> 